{"version":3,"names":[],"mappings":"","sources":["app-cart.js"],"sourcesContent":["//* --------------------------------[jScript]-----------------------------------\nwindow.onload = function () {\n\tdocument.querySelector('.preloader').classList.add(\"preloader-remove\");\n};\n\n\n// === Определение устройства вывода ===\n\"use strict\";\nvar isMobile = {\n\tAndroid: function () {\n\t\treturn navigator.userAgent.match(/Android/i);\n\t},\n\tBlackBerry: () => {\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\n\t},\n\tiOS: () => {\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\n\t},\n\tOpera: () => {\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\n\t},\n\tWindows: () => {\n\t\treturn navigator.userAgent.match(/IEMobile/i);\n\t},\n\n\n\tany: () => {\n\t\treturn (\n\t\t\tisMobile.Android() ||\n\t\t\tisMobile.BlackBerry() ||\n\t\t\tisMobile.iOS() ||\n\t\t\tisMobile.Opera() ||\n\t\t\tisMobile.Windows());\n\t}\n};\n// Dynamic Adapt v.1\n// HTML data-da=\"where(uniq class name),position(digit),when(breakpoint)\"\n// e.x. data-da=\"item,2,992\"\n\n\"use strict\";\n\n(function () {\n\tlet originalPositions = [];\n\tlet daElements = document.querySelectorAll('[data-da]');\n\tlet daElementsArray = [];\n\tlet daMatchMedia = [];\n\t//Заполняем массивы\n\tif (daElements.length > 0) {\n\t\tlet number = 0;\n\t\tfor (let index = 0; index < daElements.length; index++) {\n\t\t\tconst daElement = daElements[index];\n\t\t\tconst daMove = daElement.getAttribute('data-da');\n\t\t\tconst daPlace = daElement.hasAttribute('data-da-position') ? daElement.getAttribute('data-da-position') : 'last';\n\t\t\tconst daResolutionBreakpoint = daElement.hasAttribute('data-da-resolution') ? daElement.getAttribute('data-da-resolution') : 768;\n\t\t\t// noinspection JSCheckFunctionSignatures\n\t\t\tdaElement.setAttribute('data-da-index', number);\n\t\t\t//Заполняем массив первоначальных позиций\n\t\t\toriginalPositions[number] = {\n\t\t\t\t\"parent\": daElement.parentNode,\n\t\t\t\t\"index\": indexInParent(daElement)\n\t\t\t};\n\t\t\t//Заполняем массив элементов\n\t\t\tdaElementsArray[number] = {\n\t\t\t\t\"element\": daElement,\n\t\t\t\t\"destination\": document.querySelector('.' + daMove),\n\t\t\t\t\"place\": daPlace,\n\t\t\t\t\"breakpoint\": daResolutionBreakpoint\n\t\t\t};\n\t\t\tnumber++;\n\t\t}\n\t\tdynamicAdaptSort(daElementsArray);\n\n\t\t//Создаем события в точке брейкпоинта\n\t\tfor (let index = 0; index < daElementsArray.length; index++) {\n\t\t\tconst el = daElementsArray[index];\n\t\t\tconst daBreakpoint = el.breakpoint;\n\t\t\tconst daType = \"max\"; //Для MobileFirst поменять на min\n\n\t\t\tdaMatchMedia.push(window.matchMedia(\"(\" + daType + \"-width: \" + daBreakpoint + \"px)\"));\n\t\t\tdaMatchMedia[index].addListener(dynamicAdapt);\n\t\t}\n\t}\n\n\t//Основная функция\n\tfunction dynamicAdapt() {\n\t\tfor (let index = 0; index < daElementsArray.length; index++) {\n\t\t\tconst el = daElementsArray[index];\n\t\t\tconst daElement = el.element;\n\t\t\tconst daDestination = el.destination;\n\t\t\tconst daPlace = el.place;\n\t\t\tconst daBreakpoint = el.breakpoint;\n\t\t\tconst daClassname = \"_dynamic_adapt_\" + daBreakpoint;\n\n\t\t\tif (daMatchMedia[index].matches) {\n\t\t\t\t//Перебрасываем элементы\n\t\t\t\tif (!daElement.classList.contains(daClassname)) {\n\t\t\t\t\tlet actualIndex = indexOfElements(daDestination)[daPlace];\n\t\t\t\t\tif (daPlace === 'first') {\n\t\t\t\t\t\tactualIndex = indexOfElements(daDestination)[0];\n\t\t\t\t\t} else if (daPlace === 'last') {\n\t\t\t\t\t\tactualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];\n\t\t\t\t\t}\n\t\t\t\t\tdaDestination.insertBefore(daElement, daDestination.children[actualIndex]);\n\t\t\t\t\tdaElement.classList.add(daClassname);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//Возвращаем на место\n\t\t\t\tif (daElement.classList.contains(daClassname)) {\n\t\t\t\t\tdynamicAdaptBack(daElement);\n\t\t\t\t\tdaElement.classList.remove(daClassname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcustomAdapt();\n\t}\n\n\t//Вызов основной функции\n\tdynamicAdapt();\n\n\t//Функция возврата на место\n\tfunction dynamicAdaptBack(el) {\n\t\tconst daIndex = el.getAttribute('data-da-index');\n\t\tconst originalPlace = originalPositions[daIndex];\n\t\tconst parentPlace = originalPlace['parent'];\n\t\tconst indexPlace = originalPlace['index'];\n\t\tconst actualIndex = indexOfElements(parentPlace, true)[indexPlace];\n\t\tparentPlace.insertBefore(el, parentPlace.children[actualIndex]);\n\t}\n\n\t//Функция получения индекса внутри родителя\n\tfunction indexInParent(el) {\n\t\tconst children = Array.prototype.slice.call(el.parentNode.children);\n\t\treturn children.indexOf(el);\n\t}\n\n\t//Функция получения массива индексов элементов внутри родителя\n\tfunction indexOfElements(parent, back) {\n\t\tconst children = parent.children;\n\t\tconst childrenArray = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst childrenElement = children[i];\n\t\t\tif (back) {\n\t\t\t\tchildrenArray.push(i);\n\t\t\t} else {\n\t\t\t\t//Исключая перенесенный элемент\n\t\t\t\tif (childrenElement.getAttribute('data-da') == null) {\n\t\t\t\t\tchildrenArray.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn childrenArray;\n\t}\n\n\t//Сортировка объекта\n\tfunction dynamicAdaptSort(arr) {\n\t\tarr.sort(function (a, b) {\n\t\t\tif (a.breakpoint > b.breakpoint) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 1;\n\t\t\t} //Для MobileFirst поменять\n\t\t});\n\t\tarr.sort(function (a, b) {\n\t\t\tif (a.place > b.place) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t});\n\t}\n\n\t//Дополнительные сценарии адаптации\n\tfunction customAdapt() {\n\t\t// noinspection JSUnusedLocalSymbols\n\t\tconst viewport_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\t}\n}());\nclass ItcCollapse {\n\tconstructor(target, duration = 350) {\n\t\tthis._target = target;\n\t\tthis._duration = duration;\n\t}\n\tshow() {\n\t\tconst el = this._target;\n\t\tif (el.classList.contains('collapsing') || el.classList.contains('_show')) {\n\t\t\treturn;\n\t\t}\n\t\tel.classList.remove('_collapse');\n\t\tconst height = el.offsetHeight;\n\t\tel.style.height = 0;\n\t\tel.style.overflow = 'hidden';\n\t\tel.style.transition = `height ${this._duration}ms ease`;\n\t\tel.classList.add('collapsing');\n\t\tel.offsetHeight;\n\t\tel.style.height = `${height}px`;\n\t\twindow.setTimeout(() => {\n\t\t\tel.classList.remove('collapsing');\n\t\t\tel.classList.add('_collapse');\n\t\t\tel.classList.add('_show');\n\t\t\tel.style.height = '';\n\t\t\tel.style.transition = '';\n\t\t\tel.style.overflow = '';\n\n\t\t}, this._duration);\n\t}\n\thide() {\n\t\tconst el = this._target;\n\t\tif (el.classList.contains('collapsing') || !el.classList.contains('_show')) {\n\t\t\treturn;\n\t\t}\n\t\tel.style.height = `${el.offsetHeight}px`;\n\t\tel.offsetHeight;\n\t\tel.style.height = 0;\n\t\tel.style.overflow = 'hidden';\n\t\tel.style.transition = `height ${this._duration}ms ease`;\n\t\tel.classList.remove('_collapse');\n\t\tel.classList.remove('_show');\n\t\tel.classList.add('collapsing');\n\t\twindow.setTimeout(() => {\n\t\t\tel.classList.remove('collapsing');\n\t\t\tel.classList.add('_collapse');\n\t\t\tel.style.height = '';\n\t\t\tel.style.transition = '';\n\t\t\tel.style.overflow = '';\n\t\t}, this._duration);\n\t}\n\ttoggle() {\n\t\tthis._target.classList.contains('_show') ? this.hide() : this.show();\n\t}\n}"],"file":"app-cart.js"}