{"version":3,"names":[],"mappings":"","sources":["cart.js"],"sourcesContent":["//* --------------------------[Quantity products]-------------------------------\nconst counters = document.querySelectorAll('[data-quantity]');\nconst productPrices = document.querySelectorAll('.product-prices>p');\nif (counters) {\n\tcounters.forEach(counter => {\n\t\tcounter.addEventListener('click', (e) => {\n\t\t\ttarget = e.target;\n\t\t\tif (target.closest('.quantity__buttom')) {\n\t\t\t\tif (target.closest('.quantity').querySelector('input').value == '' && (target.classList.contains('quantity-remove') || target.classList.contains('quantity-add'))) {\n\t\t\t\t\ttarget.closest('.quantity').querySelector('input').value = 0;\n\t\t\t\t}\n\t\t\t\tlet value = parseInt(target.closest('.quantity').querySelector('input').value);\n\t\t\t\tif (target.classList.contains('quantity-add')) {\n\t\t\t\t\tvalue++;\n\t\t\t\t} else {\n\t\t\t\t\t--value;\n\t\t\t\t}\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t\t_opacityAdd();\n\t\t\t\t} else {\n\t\t\t\t\t_opacityRemove();\n\t\t\t\t}\n\n\t\t\t\ttarget.closest('.quantity').querySelector('input').value = value;\n\t\t\t}\n\t\t\t_totalSum();\n\t\t});\n\t\tcounter.querySelector('input').addEventListener('keyup', (e) => {\n\t\t\te = e || window.e;\n\t\t\tconst target = e.target;\n\t\t\tlet value = parseInt(target.closest('.quantity').querySelector('input').value);\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\tvalue = value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowDown') {\n\t\t\t\t--value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowUp') {\n\t\t\t\tvalue++;\n\t\t\t} else if (e.key === 'ArrowLeft') {\n\t\t\t\t--value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowRight') {\n\t\t\t\tvalue++;\n\t\t\t}\n\t\t\tif (value <= 1) {\n\t\t\t\tlet = _opacityAdd();\n\t\t\t} else if (value > 1) {\n\t\t\t\tlet = _opacityRemove();\n\t\t\t}\n\t\t\tvalue = isNaN(value) ? 1 : value;\n\t\t\ttarget.closest('.quantity').querySelector('input').value = value;\n\t\t\t_totalSum();\n\t\t\tvalue.oninput = function () {\n\t\t\t\tthis.value = this.value.replace(/[^\\d]/g, '');\n\t\t\t};\n\t\t});\n\t});\n};\nfunction _opacityAdd() {\n\ttarget.closest('.quantity').querySelector('.quantity-remove').classList.add('_disabled');\n}\nfunction _opacityRemove() {\n\ttarget.closest('.quantity').querySelector('.quantity-remove').classList.remove('_disabled');\n}\nfunction _totalSum() {\n\tlet totalSum = 0;\n\tproductPrices.forEach(productPrice => {\n\t\tconst inputTotal = document.querySelector('.input-total');\n\t\tlet valuePrice = parseInt(String(productPrice.textContent).replace(/ /g, ''));\n\t\tlet quantity = productPrice.closest('.shopping-cart__item').querySelector('input').value;\n\n\t\ttotalSumProduct = (valuePrice * quantity);\n\t\ttotalSum += (+totalSumProduct);\n\n\t\tproductPrice.closest('.shopping-cart__item').querySelector('.card-name__quantity-price').textContent = totalSumProduct.toLocaleString('ru-Ru', {\n\t\t\tstyle: 'currency',\n\t\t\tcurrency: 'RUB',\n\t\t\tminimumFractionDigits: 0,\n\t\t});\n\t\tinputTotal.innerHTML = totalSum.toLocaleString() + `<i class=\"icon-ruble\"></i>`;\n\t});\n}\n_totalSum();\n//* --------------------------------[Tabs]--------------------------------------\nconst tablinks = document.querySelectorAll('._tablinks');\nconst tabcontents = document.querySelectorAll('._tabcontent');\nfor (const i in tablinks) {\n\tconst tablink = tablinks[i];\n\tconst tabcontent = tabcontents[i];\n\tif (Object.hasOwnProperty.call(tabcontents, i)) {\n\t\ttablink.addEventListener('click', () => {\n\t\t\tconst view_tablink = document.querySelector('._active');\n\t\t\tconst view_content = document.querySelector('._show');\n\t\t\t_toggleLink(view_tablink);\n\t\t\tif (view_tablink && view_tablink !== tabcontent) {\n\t\t\t\t_toggleLink(tablink);\n\t\t\t}\n\t\t\t_toggleShow(view_content);\n\t\t\tif (view_content && view_content !== tablink) {\n\t\t\t\t_toggleShow(tabcontent);\n\t\t\t}\n\t\t});\n\t}\n}\nconst _toggleLink = (el) => {\n\tif (el.classList.contains('_active')) {\n\t\tel.classList.remove('_active');\n\t} else {\n\t\tel.classList.add('_active');\n\t}\n};\nconst _toggleShow = (el) => {\n\tif (el.classList.contains('_show')) {\n\t\tel.classList.remove('_show');\n\t} else {\n\t\tel.classList.add('_show');\n\t}\n};\n///* ------------------------------ [Select]-------------------------------------\nconst itsSelect = document.querySelectorAll('[data-select]');\nif (itsSelect) {\n\titsSelect.forEach(select => {\n\t\tconst dropDownBtn = select.querySelector('.dropdown__button');\n\t\tconst dropDownBox = select.querySelector('.dropdown__box-button');\n\t\tconst dropDownList = select.querySelector('.dropdown__list');\n\t\tconst listItems = dropDownList.querySelectorAll('.dropdown__list-item');\n\n\t\tdropDownBox.addEventListener('click', function (el) {\n\t\t\ttarget = el.target;\n\t\t\tif (target.closest('.dropdown__box-button')) {\n\t\t\t\ttarget = el.target.closest('.dropdown__box-button').nextElementSibling.querySelector('._selected');\n\t\t\t\tdropDownBtn.value = target.innerText;\n\t\t\t}\n\t\t});\n\n\t\tlet start = listItems[0];\n\t\tif (listItems.length !== 0) {\n\t\t\t[].forEach.call(listItems, function (list) {\n\t\t\t\tlist.addEventListener('click', function () {\n\t\t\t\t\tstart = this;\n\t\t\t\t\tstart.focus();\n\t\t\t\t\tdropDownBtn.value = list.innerText;\n\n\t\t\t\t\tconst el_selected = dropDownList.querySelector('._selected');\n\t\t\t\t\t_listItem(list);\n\t\t\t\t\tif (el_selected && el_selected !== list) {\n\t\t\t\t\t\t_listItem(el_selected);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist.classList.add('_selected');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// //todo Переключатель классов\n\t\t\tconst _listItem = (list) => {\n\t\t\t\tconst collapse = new ItcCollapse(list.closest('._collapse'));\n\t\t\t\tif (list.classList.contains('_selected')) {\n\t\t\t\t\tlist.classList.remove('_selected');\n\t\t\t\t\tcollapse.toggle();\n\t\t\t\t\tlist.closest('.dropdown').classList.remove('_active-collapse');\n\t\t\t\t} else {\n\t\t\t\t\tlist.classList.add('_selected');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tselect.addEventListener('keydown', function (e) {\n\t\t\te = e || window.e;\n\t\t\tif (e.key == 'ArrowUp') {\n\t\t\t\t//* Arrow Up\n\t\t\t\tlet sibling = start.previousElementSibling;\n\t\t\t\tselectNext(sibling);\n\n\t\t\t} else if (e.key == 'ArrowDown') {\n\t\t\t\t//* Arrow Down\n\t\t\t\tlet sibling = start.nextElementSibling;\n\t\t\t\tselectNext(sibling);\n\t\t\t}\n\t\t});\n\n\t\t//todo Нажатие на Tab или Escape. Закрыть дропдаун\n\t\tdocument.addEventListener('keydown', function (el) {\n\t\t\tif (el.key === 'Tab' || el.key === 'Escape') {\n\t\t\t\topenBos();\n\t\t\t}\n\t\t});\n\n\t\t//todo Клик снаружи дропдауна. Закрыть дропдаун\n\t\tdocument.addEventListener('click', function (e) {\n\t\t\tconst classList = e.target.classList;\n\t\t\tswitch (true) {\n\t\t\t\tcase classList.contains('dropdown__button'):\n\t\t\t\t\tbreak;\n\t\t\t\tcase classList.contains('dropdown__list-item'):\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\topenBos();\n\t\t\t\t\tbreak;\n\n\t\t\t};\n\t\t});\n\n\t\tfunction selectNext(sibling) {\n\t\t\tif (sibling !== null) {\n\t\t\t\tstart.focus();\n\t\t\t\tstart.classList.remove('_selected');\n\t\t\t\tsibling.focus();\n\t\t\t\tsibling.classList.add('_selected');\n\t\t\t\tstart = sibling;\n\t\t\t}\n\t\t}\n\t});\n\n\n\tfunction openBos() {\n\t\tconst dropDown = document.querySelectorAll('.dropdown');\n\t\tdropDown.forEach(el => {\n\t\t\tif (el.classList.contains('_active-collapse')) {\n\t\t\t\t_toggleOpen(el);\n\t\t\t}\n\t\t});\n\t}\n\n}\n\nconst dropDowun = document.querySelectorAll('.dropdown');\ndropDowun.forEach((item) => {\n\tconst trigger = item.querySelector('.dropdown__button');\n\ttrigger.addEventListener('click', () => {\n\t\tconst opened_item = document.querySelector('._active-collapse');\n\t\t_toggleOpen(item);\n\t\tconsole.log(item);\n\t\tif (opened_item && opened_item !== item) {\n\t\t\t_toggleOpen(opened_item);\n\t\t}\n\t});\n});\n\n// //todo Переключатель классов\nconst _toggleOpen = (el) => {\n\tconst collapse = new ItcCollapse(el.querySelector('._collapse'));\n\tif (el.classList.contains('_active-collapse')) {\n\t\tel.classList.toggle('_active-collapse');\n\t\tcollapse.toggle();\n\t} else {\n\t\tel.classList.add('_active-collapse');\n\t\tcollapse.toggle();\n\t}\n};\n//* ----------------------------------------------------------------------------\nwindow.addEventListener(\"keydown\", function (e) {\n\tif ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].indexOf(e.code) > -1) {\n\t\te.preventDefault();\n\t}\n}, false);"],"file":"cart.js"}