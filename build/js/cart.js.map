{"version":3,"names":[],"mappings":"","sources":["cart.js"],"sourcesContent":["//* --------------------------[Quantity products]-------------------------------\nconst counters = document.querySelectorAll('[data-quantity]');\nconst productPrices = document.querySelectorAll('.product-prices>p');\nif (counters) {\n\tcounters.forEach(counter => {\n\t\tcounter.addEventListener('click', (e) => {\n\t\t\ttarget = e.target;\n\t\t\tif (target.closest('.quantity__buttom')) {\n\t\t\t\tif (target.closest('.quantity').querySelector('input').value == '' && (target.classList.contains('quantity-remove') || target.classList.contains('quantity-add'))) {\n\t\t\t\t\ttarget.closest('.quantity').querySelector('input').value = 0;\n\t\t\t\t}\n\t\t\t\tlet value = parseInt(target.closest('.quantity').querySelector('input').value);\n\t\t\t\tif (target.classList.contains('quantity-add')) {\n\t\t\t\t\tvalue++;\n\t\t\t\t} else {\n\t\t\t\t\t--value;\n\t\t\t\t}\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t\t_opacityAdd();\n\t\t\t\t} else {\n\t\t\t\t\t_opacityRemove();\n\t\t\t\t}\n\n\t\t\t\ttarget.closest('.quantity').querySelector('input').value = value;\n\t\t\t}\n\t\t\t_totalSum();\n\t\t});\n\t\tcounter.querySelector('input').addEventListener('keyup', (e) => {\n\t\t\te = e || window.e;\n\t\t\tconst target = e.target;\n\t\t\tlet value = parseInt(target.closest('.quantity').querySelector('input').value);\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\tvalue = value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowDown') {\n\t\t\t\t--value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowUp') {\n\t\t\t\tvalue++;\n\t\t\t} else if (e.key === 'ArrowLeft') {\n\t\t\t\t--value;\n\t\t\t\tif (value <= 1) {\n\t\t\t\t\tvalue = 1;\n\t\t\t\t}\n\t\t\t} else if (e.key === 'ArrowRight') {\n\t\t\t\tvalue++;\n\t\t\t}\n\t\t\tif (value <= 1) {\n\t\t\t\tlet = _opacityAdd();\n\t\t\t} else if (value > 1) {\n\t\t\t\tlet = _opacityRemove();\n\t\t\t}\n\t\t\tvalue = isNaN(value) ? 1 : value;\n\t\t\ttarget.closest('.quantity').querySelector('input').value = value;\n\t\t\t_totalSum();\n\t\t\tvalue.oninput = function () {\n\t\t\t\tthis.value = this.value.replace(/[^\\d]/g, '');\n\t\t\t};\n\t\t});\n\t});\n};\nfunction _opacityAdd() {\n\ttarget.closest('.quantity').querySelector('.quantity-remove').classList.add('_disabled');\n}\nfunction _opacityRemove() {\n\ttarget.closest('.quantity').querySelector('.quantity-remove').classList.remove('_disabled');\n}\nfunction _totalSum() {\n\tlet totalSum = 0;\n\tproductPrices.forEach(productPrice => {\n\t\tconst inputTotal = document.querySelector('.input-total');\n\t\tlet valuePrice = parseInt(String(productPrice.textContent).replace(/ /g, ''));\n\t\tlet quantity = productPrice.closest('.shopping-cart__item').querySelector('input').value;\n\n\t\ttotalSumProduct = (valuePrice * quantity);\n\t\ttotalSum += (+totalSumProduct);\n\n\t\tproductPrice.closest('.shopping-cart__item').querySelector('.card-name__quantity-price').textContent = totalSumProduct.toLocaleString('ru-Ru', {\n\t\t\tstyle: 'currency',\n\t\t\tcurrency: 'RUB',\n\t\t\tminimumFractionDigits: 0,\n\t\t});\n\t\tinputTotal.innerHTML = totalSum.toLocaleString() + `<i class=\"icon-ruble\"></i>`;\n\t});\n}\n_totalSum();\n//* ----------------------------[Shift-Tabs]-----------------------------------\nconst tablinks = document.querySelectorAll('.tab-button__item');\nconst tabcontents = document.querySelectorAll('.order-place__quick-order');\nfor (const i in tablinks) {\n\tconst tablink = tablinks[i];\n\tconst tabcontent = tabcontents[i];\n\tif (Object.hasOwnProperty.call(tabcontents, i)) {\n\t\ttablink.addEventListener('click', () => {\n\t\t\tconst view_tablink = document.querySelector('.tab-button__item._active');\n\t\t\tconst view_content = document.querySelector('.order-place__quick-order._active');\n\t\t\tconsole.log(view_content);\n\t\t\t_toggleLink(view_tablink);\n\t\t\tif (view_tablink && view_tablink !== tabcontent) {\n\t\t\t\t_toggleLink(tablink);\n\t\t\t}\n\t\t\t_toggleLink(view_content);\n\t\t\tif (view_content && view_content !== tablink) {\n\t\t\t\t_toggleLink(tabcontent);\n\t\t\t}\n\t\t});\n\t}\n}\nconst _toggleLink = (el) => {\n\tif (el.classList.contains('_active')) {\n\t\tel.classList.remove('_active');\n\t} else {\n\t\tel.classList.add('_active');\n\t}\n};\n//* ------------------------------ [Select]-------------------------------------\ndocument.querySelectorAll('[data-select]').forEach(function (selectGroup) {\n\tconst itsSelects = selectGroup.querySelectorAll('.select');\n\tif (itsSelects) {\n\t\titsSelects.forEach(itsSelect => {\n\t\t\tconst listItems = itsSelect.querySelectorAll('.select__list-item');\n\t\t\tconst selectButton = itsSelect.querySelector('.select__button');\n\t\t\titsSelect.addEventListener('click', function (el) {\n\t\t\t\tif (el.target.closest('.select__button')) {\n\t\t\t\t\tconst opened_select = document.querySelector('._active-collapse');\n\t\t\t\t\t_toggleOpen(itsSelect);\n\t\t\t\t\tif (el.target.closest('.select__box-button')) {\n\t\t\t\t\t\tstart = el.target.closest('.select__box-button').nextElementSibling.querySelector('._selected');\n\t\t\t\t\t}\n\t\t\t\t\tif (!el.target.closest('.select').classList.contains('_active-collapse')) {\n\t\t\t\t\t\tselectButton.blur();\n\t\t\t\t\t}\n\t\t\t\t\tif (opened_select && opened_select !== itsSelect) {\n\t\t\t\t\t\t_toggleOpen(opened_select);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet start = listItems[0];\n\t\t\tif (listItems.length !== 0) {\n\t\t\t\t[].forEach.call(listItems, function (listItem) {\n\t\t\t\t\tlistItem.addEventListener('click', function (el) {\n\t\t\t\t\t\tstart = this;\n\t\t\t\t\t\tstart.focus();\n\t\t\t\t\t\tselectButton.value = listItem.textContent;\n\t\t\t\t\t\tconst el_selected = itsSelect.querySelector('._selected');\n\t\t\t\t\t\t_listItem(listItem);\n\t\t\t\t\t\tif (el_selected && el_selected !== listItem) {\n\t\t\t\t\t\t\t_listItem(el_selected);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlistItem.classList.add('_selected');\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//* -------------------------------------------------\n\t\t\t\t\t\tselectValue();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tfunction selectValue() {\n\t\t\t\t\tlet buttons = selectGroup.getElementsByClassName('select__button');\n\t\t\t\t\tfor (i = 0; i < buttons.length; i++) {\n\t\t\t\t\t\tbuttons[i].value = start.textContent;\n\t\t\t\t\t\tselectButton.blur();\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t//todo Переключатель классов\n\t\t\t\tconst _listItem = (el) => {\n\t\t\t\t\tconst collapse = new ItcCollapse(el.closest('._collapse'));\n\t\t\t\t\tif (el.classList.contains('_selected')) {\n\t\t\t\t\t\tel.classList.remove('_selected');\n\t\t\t\t\t\tcollapse.toggle();\n\t\t\t\t\t\tel.closest('.select').classList.remove('_active-collapse');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.classList.add('_selected');\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\tselectGroup.addEventListener('keydown', function (e) {\n\t\t\t\te = e || window.e;\n\t\t\t\ttarget = e.target;\n\t\t\t\tif (e.key == 'ArrowUp') {\n\t\t\t\t\t//* Arrow Up -------------------------------------\n\t\t\t\t\tlet sibling = start.previousElementSibling;\n\t\t\t\t\tselectNext(sibling);\n\t\t\t\t} else if (e.key == 'ArrowDown') {\n\t\t\t\t\t//* Arrow Down -----------------------------------\n\t\t\t\t\tlet sibling = start.nextElementSibling;\n\t\t\t\t\tselectNext(sibling);\n\t\t\t\t} else if (e.key == 'Enter') {\n\t\t\t\t\t//* Key Enter ------------------------------------\n\t\t\t\t\t// sibling = e.target;\n\t\t\t\t\tselectValue();\n\t\t\t\t\tcloseBos();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// todo Переключение активного элемента и его выделение при изменении фокуса;\n\t\t\tfunction selectNext(sibling) {\n\t\t\t\tif (sibling !== null) {\n\t\t\t\t\tstart.focus();\n\t\t\t\t\tstart.classList.remove('_selected');\n\t\t\t\t\tsibling.focus();\n\t\t\t\t\tsibling.classList.add('_selected');\n\t\t\t\t\tstart = sibling;\n\t\t\t\t}\n\t\t\t}\n\n\n\n\n\t\t\t//todo Переключатель классов\n\t\t\tconst _toggleOpen = (el) => {\n\t\t\t\tconst collapse = new ItcCollapse(el.closest('.select').querySelector('._collapse'));\n\t\t\t\tif (el.classList.contains('_active-collapse')) {\n\t\t\t\t\tel.classList.remove('_active-collapse');\n\t\t\t\t\tcollapse.toggle();\n\t\t\t\t} else {\n\t\t\t\t\tel.classList.add('_active-collapse');\n\t\t\t\t\tcollapse.toggle();\n\t\t\t\t}\n\t\t\t};\n\t\t\t//todo Нажатие на Tab или Escape. Закрыть дропдаун;\n\t\t\tdocument.addEventListener('keydown', function (el) {\n\t\t\t\tif (el.key === 'Tab' || el.key === 'Escape') {\n\t\t\t\t\tselectButton.blur();\n\t\t\t\t\tcloseBos();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//todo Клик снаружи дропдауна. Закрыть дропдаун;\n\t\t\tdocument.addEventListener('click', function (e) {\n\t\t\t\tconst classList = e.target.classList;\n\t\t\t\tswitch (true) {\n\t\t\t\t\tcase classList.contains('select__button'):\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase classList.contains('select__list-item'):\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcloseBos();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t};\n\t\t\t});\n\n\t\t\t//todo Клик снаружи дропдауна. Переключатель классов. Закрыть дропдаун;\n\t\t\tfunction closeBos() {\n\t\t\t\tconst dropDown = document.querySelectorAll('.select');\n\t\t\t\tdropDown.forEach(el => {\n\t\t\t\t\tif (el.classList.contains('_active-collapse')) {\n\t\t\t\t\t\t_toggleOpen(el);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n});\n\n//* ----------------------------------------------------------------------------\nwindow.addEventListener(\"keydown\", function (e) {\n\tif ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].indexOf(e.code) > -1) {\n\t\te.preventDefault();\n\t}\n}, false);"],"file":"cart.js"}